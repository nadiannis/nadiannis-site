#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ¨ğŸ§ªğŸ”¨ Styling, testing, and building the project before committing ğŸ¨ğŸ§ªğŸ”¨';

# Check eslint standards
npm run lint:check ||
(
  echo 'ğŸ™ğŸ™ ESLint check failed. Make the required changes listed above, add changes, and try to commit again. ğŸ™ğŸ™';
  false;
)

# Check prettier standards
npm run prettier:check ||
(
  echo 'ğŸ™ğŸ™ Prettier check failed. Run npm run prettier:format or yarn prettier:format, add changes, and try to commit again. ğŸ™ğŸ™';
  false;
)

# If everything passes, try to build the project
echo 'ğŸ™‚ğŸ™‚ Code looks good, trying to build now. ğŸ™‚ğŸ™‚';

npm run build ||
(
  echo 'âŒğŸ”¨ Next build failed. View the errors to find out why. âŒğŸ”¨';
  false;
)

# If it builds, we can commit
echo 'âœ…âœ… All good. I am committing this now. âœ…âœ…'; 